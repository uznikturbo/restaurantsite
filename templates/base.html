<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}æ¡œ â€” Ğ¯Ğ¿Ğ¾Ğ½ÑÑŒĞºĞ¸Ğ¹ Ğ ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Noto+Serif+JP:wght@200;300;400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --ink:     #1a1208;
            --paper:   #f7f3ee;
            --silk:    #ede8e0;
            --red:     #c0392b;
            --red-dim: #9b2c2c;
            --gold:    #c9a84c;
            --mist:    rgba(26,18,8,.06);
            --shadow:  rgba(26,18,8,.12);
            --r:       4px;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--paper);
            color: var(--ink);
            min-height: 100vh;
            font-size: 15px;
            line-height: 1.7;
        }

        /* â”€â”€ Grain overlay â”€â”€ */
        body::before {
            content: '';
            position: fixed; inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 9998;
            opacity: .5;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           NAV
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .nav {
            position: sticky; top: 0; z-index: 900;
            background: rgba(247,243,238,.92);
            backdrop-filter: blur(16px) saturate(1.4);
            border-bottom: 1px solid rgba(26,18,8,.08);
        }

        .nav__inner {
            max-width: 1360px; margin: 0 auto;
            padding: 0 2rem;
            display: flex; align-items: center; gap: 2rem;
            height: 64px;
        }

        .nav__logo {
            font-family: 'Noto Serif JP', serif;
            font-weight: 200;
            font-size: 1.35rem;
            color: var(--ink);
            text-decoration: none;
            letter-spacing: .05em;
            white-space: nowrap;
            display: flex; align-items: center; gap: .6rem;
        }

        .nav__logo-kanji {
            font-size: 1.6rem;
            color: var(--red);
        }

        .nav__links {
            display: flex; align-items: center; gap: .2rem;
            list-style: none;
            flex: 1; justify-content: center;
        }

        .nav__link {
            font-size: .85rem;
            font-weight: 400;
            letter-spacing: .06em;
            text-transform: uppercase;
            color: rgba(26,18,8,.6);
            text-decoration: none;
            padding: .4rem .9rem;
            border-radius: var(--r);
            transition: color .2s, background .2s;
        }

        .nav__link:hover { color: var(--ink); background: var(--mist); }
        .nav__link--active { color: var(--red); }

        .nav__actions {
            display: flex; align-items: center; gap: .75rem;
        }

        .btn { 
            display: inline-flex; align-items: center; gap: .4rem;
            padding: .55rem 1.4rem;
            border-radius: 2px;
            font-family: 'DM Sans', sans-serif;
            font-size: .82rem;
            font-weight: 500;
            letter-spacing: .07em;
            text-transform: uppercase;
            text-decoration: none;
            cursor: pointer;
            border: none;
            transition: all .25s;
            white-space: nowrap;
        }

        .btn--primary {
            background: var(--red);
            color: #fff;
        }
        .btn--primary:hover { background: var(--red-dim); transform: translateY(-1px); box-shadow: 0 4px 16px rgba(192,57,43,.3); }

        .btn--ghost {
            background: transparent;
            color: var(--ink);
            border: 1px solid rgba(26,18,8,.2);
        }
        .btn--ghost:hover { border-color: var(--ink); background: var(--mist); }

        .btn--gold {
            background: var(--gold);
            color: #fff;
        }
        .btn--gold:hover { background: #b8922e; transform: translateY(-1px); box-shadow: 0 4px 16px rgba(201,168,76,.35); }

        /* Hamburger */
        .nav__burger { display: none; flex-direction: column; gap: 5px; cursor: pointer; padding: 4px; }
        .nav__burger span { width: 22px; height: 2px; background: var(--ink); border-radius: 2px; transition: .3s; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FLASH
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .flashes {
            position: fixed; top: 72px; right: 1.5rem;
            z-index: 9000;
            display: flex; flex-direction: column; gap: .5rem;
            pointer-events: none;
        }

        .flash {
            pointer-events: all;
            padding: .85rem 1.4rem;
            border-radius: var(--r);
            font-size: .85rem;
            font-weight: 500;
            letter-spacing: .02em;
            display: flex; align-items: center; gap: .75rem;
            box-shadow: 0 8px 32px var(--shadow);
            animation: slideFlash .35s cubic-bezier(.16,1,.3,1) both;
            max-width: 340px;
        }

        @keyframes slideFlash {
            from { opacity: 0; transform: translateX(30px); }
            to   { opacity: 1; transform: translateX(0); }
        }

        .flash--success { background: #ecfdf5; color: #065f46; border-left: 3px solid #10b981; }
        .flash--error   { background: #fef2f2; color: #991b1b; border-left: 3px solid var(--red); }
        .flash--warning { background: #fffbeb; color: #92400e; border-left: 3px solid var(--gold); }
        .flash--info    { background: #eff6ff; color: #1e40af; border-left: 3px solid #3b82f6; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MAIN / CONTAINER
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .wrap {
            max-width: 1360px;
            margin: 0 auto;
            padding: 2.5rem 2rem 4rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORM PRIMITIVES (global)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .field { display: flex; flex-direction: column; gap: .4rem; }
        .field label {
            font-size: .78rem;
            font-weight: 500;
            letter-spacing: .08em;
            text-transform: uppercase;
            color: rgba(26,18,8,.55);
        }

        .field input,
        .field select,
        .field textarea {
            width: 100%;
            padding: .8rem 1rem;
            background: #fff;
            border: 1px solid rgba(26,18,8,.15);
            border-radius: var(--r);
            font-family: 'DM Sans', sans-serif;
            font-size: .95rem;
            color: var(--ink);
            transition: border-color .2s, box-shadow .2s;
            appearance: none;
        }

        .field input:focus,
        .field select:focus,
        .field textarea:focus {
            outline: none;
            border-color: var(--red);
            box-shadow: 0 0 0 3px rgba(192,57,43,.1);
        }

        .field textarea { min-height: 100px; resize: vertical; }

        .field .error { font-size: .78rem; color: var(--red); margin-top: .15rem; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           STATUS BADGES
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .badge {
            display: inline-flex; align-items: center;
            padding: .25rem .75rem;
            border-radius: 50px;
            font-size: .75rem;
            font-weight: 500;
            letter-spacing: .04em;
        }

        .badge--new        { background: #fef3c7; color: #92400e; }
        .badge--cooking    { background: #dbeafe; color: #1e40af; }
        .badge--ready      { background: #d1fae5; color: #065f46; }
        .badge--delivered  { background: #dcfce7; color: #166534; }
        .badge--cancelled  { background: #fee2e2; color: #991b1b; }
        .badge--pending    { background: #fef3c7; color: #92400e; }
        .badge--paid       { background: #d1fae5; color: #065f46; }
        .badge--failed     { background: #fee2e2; color: #991b1b; }
        .badge--active     { background: #d1fae5; color: #065f46; }
        .badge--deleted    { background: #fee2e2; color: #991b1b; }
        .badge--admin      { background: #fef3c7; color: #92400e; }
        .badge--user       { background: #e0e7ff; color: #3730a3; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DIVIDER / ORNAMENT
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .ornament {
            display: flex; align-items: center; gap: 1rem;
            color: var(--gold); font-size: .9rem;
            margin: 2rem 0;
        }
        .ornament::before, .ornament::after {
            content: '';
            flex: 1; height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE HERO
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .hero {
            position: relative;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 3rem;
        }

        .hero__bg {
            position: absolute; inset: 0;
            background-size: cover; background-position: center;
        }
        .hero__bg::after {
            content: '';
            position: absolute; inset: 0;
            background: linear-gradient(135deg, rgba(26,18,8,.72), rgba(26,18,8,.45));
        }

        .hero__content {
            position: relative; z-index: 2;
            padding: 5rem 3.5rem;
            color: #fff;
        }

        .hero__eyebrow {
            font-size: .72rem;
            letter-spacing: .2em;
            text-transform: uppercase;
            color: var(--gold);
            margin-bottom: .75rem;
        }

        .hero__title {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(2.4rem, 5vw, 4.2rem);
            font-weight: 300;
            line-height: 1.15;
            margin-bottom: 1rem;
        }

        .hero__sub {
            font-size: 1rem;
            color: rgba(255,255,255,.75);
            max-width: 520px;
            line-height: 1.6;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CARD
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .card {
            background: #fff;
            border-radius: 6px;
            border: 1px solid rgba(26,18,8,.08);
            overflow: hidden;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FOOTER
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .footer {
            background: var(--ink);
            color: rgba(255,255,255,.65);
            padding: 4rem 2rem 2rem;
            font-size: .85rem;
        }

        .footer__inner {
            max-width: 1360px; margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 3rem;
        }

        .footer__brand {
            font-family: 'Noto Serif JP', serif;
            font-weight: 200;
            font-size: 1.5rem;
            color: #fff;
            margin-bottom: .75rem;
        }

        .footer__brand span { color: var(--red); }

        .footer h4 {
            font-size: .7rem;
            letter-spacing: .15em;
            text-transform: uppercase;
            color: var(--gold);
            margin-bottom: 1.2rem;
        }

        .footer p, .footer a {
            display: block;
            margin-bottom: .5rem;
            color: rgba(255,255,255,.55);
            text-decoration: none;
            transition: color .2s;
        }

        .footer a:hover { color: rgba(255,255,255,.9); }

        .footer__bottom {
            max-width: 1360px; margin: 3rem auto 0;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,.08);
            display: flex; justify-content: space-between; align-items: center;
            font-size: .75rem; color: rgba(255,255,255,.3);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCROLLBAR
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: var(--silk); }
        ::-webkit-scrollbar-thumb { background: rgba(26,18,8,.25); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(26,18,8,.4); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SAKURA (subtle)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .petal {
            position: fixed;
            pointer-events: none;
            z-index: 9997;
            opacity: 0;
            font-size: 1rem;
            animation: petalFall linear forwards;
        }

        @keyframes petalFall {
            0%   { opacity: 0; transform: translateY(-10px) rotate(0deg); }
            10%  { opacity: .35; }
            90%  { opacity: .2; }
            100% { opacity: 0; transform: translateY(102vh) rotate(480deg); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSIVE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 900px) {
            .nav__links { display: none; }
            .nav__links.open {
                display: flex; flex-direction: column;
                position: fixed; top: 64px; left: 0; right: 0;
                background: var(--paper);
                border-bottom: 1px solid rgba(26,18,8,.1);
                padding: 1.5rem 2rem;
                gap: .25rem;
                z-index: 899;
            }
            .nav__burger { display: flex; }
            .footer__inner { grid-template-columns: 1fr 1fr; gap: 2rem; }
            .hero__content { padding: 3rem 1.5rem; }
            .wrap { padding: 1.5rem 1rem 3rem; }
        }

        @media (max-width: 520px) {
            .footer__inner { grid-template-columns: 1fr; }
            .footer__bottom { flex-direction: column; gap: .5rem; text-align: center; }
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>

<!-- Petals -->
<div id="petals" aria-hidden="true"></div>

<!-- Nav -->
<nav class="nav" id="nav">
    <div class="nav__inner">
        <a href="{{ url_for('main.home') }}" class="nav__logo">
            <span class="nav__logo-kanji">æ¡œ</span> Sakura
        </a>

        <ul class="nav__links" id="navLinks">
            <li><a href="{{ url_for('main.home') }}" class="nav__link">Ğ“Ğ¾Ğ»Ğ¾Ğ²Ğ½Ğ°</a></li>
            <li><a href="{{ url_for('main.menu') }}" class="nav__link">ĞœĞµĞ½Ñ</a></li>
            <li><a href="{{ url_for('main.book') }}" class="nav__link">Ğ ĞµĞ·ĞµÑ€Ğ²</a></li>
            <li><a href="{{ url_for('main.details') }}" class="nav__link">ĞŸÑ€Ğ¾ Ğ½Ğ°Ñ</a></li>
            {% if current_user.is_authenticated %}
                <li><a href="{{ url_for('main.cart') }}" class="nav__link">ĞšĞ¾ÑˆĞ¸Ğº</a></li>
                <li><a href="{{ url_for('main.profile') }}" class="nav__link">ĞŸÑ€Ğ¾Ñ„Ñ–Ğ»ÑŒ</a></li>
                {% if current_user.is_admin %}
                    <li><a href="{{ url_for('main.admin_dashboard') }}" class="nav__link nav__link--active">ĞĞ´Ğ¼Ñ–Ğ½</a></li>
                {% endif %}
            {% endif %}
        </ul>

        <div class="nav__actions">
            {% if current_user.is_authenticated %}
                <form action="{{ url_for('main.logout') }}" method="POST" style="margin:0">
                    {{ logout_csrf() if logout_csrf is defined else '' }}
                    <button type="submit" class="btn btn--ghost">Ğ’Ğ¸Ñ…Ñ–Ğ´</button>
                </form>
            {% else %}
                <a href="{{ url_for('main.login') }}" class="btn btn--ghost">Ğ’Ñ…Ñ–Ğ´</a>
                <a href="{{ url_for('main.register') }}" class="btn btn--primary">Ğ ĞµÑ”ÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ</a>
            {% endif %}
        </div>

        <button class="nav__burger" id="burger" aria-label="ĞœĞµĞ½Ñ" onclick="toggleNav()">
            <span></span><span></span><span></span>
        </button>
    </div>
</nav>

<!-- Flash messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="flashes" id="flashes">
        {% for cat, msg in messages %}
        <div class="flash flash--{{ cat }}">
            {% if cat == 'success' %}âœ“{% elif cat == 'error' %}âœ•{% elif cat == 'warning' %}âš {% else %}i{% endif %}
            <span>{{ msg }}</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}
{% endwith %}

<!-- Content -->
<main>
    <div class="wrap">
        {% block content %}{% endblock %}
    </div>
</main>

<!-- Footer -->
<footer class="footer">
    <div class="footer__inner">
        <div>
            <div class="footer__brand"><span>æ¡œ</span> Sakura</div>
            <p>ĞĞ²Ñ‚ĞµĞ½Ñ‚Ğ¸Ñ‡Ğ½Ğ° ÑĞ¿Ğ¾Ğ½ÑÑŒĞºĞ° ĞºÑƒÑ…Ğ½Ñ<br>Ğ² ÑĞµÑ€Ñ†Ñ– Ğ§ĞµÑ€ĞºĞ°Ñ Ğ· 2018 Ñ€Ğ¾ĞºÑƒ.</p>
        </div>
        <div>
            <h4>ĞœĞµĞ½Ñ</h4>
            <a href="{{ url_for('main.menu') }}">Ğ’ÑÑ– ÑÑ‚Ñ€Ğ°Ğ²Ğ¸</a>
            <a href="{{ url_for('main.book') }}">Ğ‘Ñ€Ğ¾Ğ½ÑĞ²Ğ°Ğ½Ğ½Ñ</a>
            <a href="{{ url_for('main.details') }}">ĞŸÑ€Ğ¾ Ñ€ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½</a>
        </div>
        <div>
            <h4>ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¸</h4>
            <p>+380 11 222 33 44</p>
            <p>Ğ²ÑƒĞ». Ğ§Ğ¾Ñ€Ğ½Ğ¾Ğ²Ğ¾Ğ»Ğ°, 23</p>
            <p>Ğ§Ñ‚â€“Ğ’Ñ‚: 12:00â€“23:00</p>
        </div>
        <div>
            <h4>Ğ¡Ğ¾Ñ†Ğ¼ĞµÑ€ĞµĞ¶Ñ–</h4>
            <a href="#">Instagram</a>
            <a href="#">Facebook</a>
            <a href="#">TikTok</a>
        </div>
    </div>
    <div class="footer__bottom">
        <span>Â© 2025 æ¡œ Sakura Restaurant</span>
        <span>Ğ§ĞµÑ€ĞºĞ°ÑĞ¸, Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ğ°</span>
    </div>
</footer>

<script>
// Nav toggle
function toggleNav() {
    document.getElementById('navLinks').classList.toggle('open');
}
document.addEventListener('click', e => {
    if (!e.target.closest('.nav')) {
        document.getElementById('navLinks').classList.remove('open');
    }
});

// Auto-dismiss flashes
setTimeout(() => {
    document.querySelectorAll('.flash').forEach(f => {
        f.style.transition = 'opacity .4s, transform .4s';
        f.style.opacity = '0';
        f.style.transform = 'translateX(30px)';
        setTimeout(() => f.remove(), 400);
    });
}, 4500);

// Petals
(function() {
    const symbols = ['ğŸŒ¸','âœ¿','â€'];
    function petal() {
        const el = document.createElement('span');
        el.className = 'petal';
        el.textContent = symbols[Math.floor(Math.random() * symbols.length)];
        el.style.left = Math.random() * 100 + 'vw';
        el.style.fontSize = (.6 + Math.random() * .6) + 'rem';
        el.style.animationDuration = (6 + Math.random() * 6) + 's';
        document.getElementById('petals').appendChild(el);
        setTimeout(() => el.remove(), 12000);
    }
    setInterval(petal, 3500);
    setTimeout(petal, 800);
})();
</script>

{% block extra_js %}{% endblock %}
</body>
</html>
