{% extends "base.html" %}
{% block title %}–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ ‚Äî Ê°ú Sakura{% endblock %}

{% block extra_css %}
<style>
.success-wrap { max-width:680px;margin:0 auto;text-align:center;padding:2rem 0 4rem; }
.success-icon {
    width:96px;height:96px;
    background:linear-gradient(135deg,#10b981,#059669);
    border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    font-size:2.5rem;color:#fff;
    margin:0 auto 2rem;
    box-shadow:0 12px 30px rgba(16,185,129,.3);
    animation:popIn .7s cubic-bezier(.16,1,.3,1) both;
}
@keyframes popIn { from{transform:scale(0);opacity:0} to{transform:scale(1);opacity:1} }
.success-title { font-family:'Cormorant Garamond',serif;font-size:2.8rem;font-weight:300;margin-bottom:.75rem;animation:fadeUp .6s .3s both; }
.success-sub { font-size:.95rem;color:rgba(26,18,8,.5);margin-bottom:3rem;animation:fadeUp .6s .45s both; }
@keyframes fadeUp { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }

.order-detail-card {
    background:#fff;border:1px solid rgba(26,18,8,.07);border-radius:6px;
    padding:2rem;text-align:left;margin-bottom:2rem;
    animation:fadeUp .6s .6s both;
}
.odc-title { font-family:'Cormorant Garamond',serif;font-size:1.3rem;font-weight:400;margin-bottom:1.25rem; }
.odc-row { display:flex;justify-content:space-between;padding:.55rem 0;border-bottom:1px solid rgba(26,18,8,.05);font-size:.88rem; }
.odc-row:last-child { border:none;font-family:'Cormorant Garamond',serif;font-size:1.4rem;padding-top:.75rem; }
.odc-row .label { color:rgba(26,18,8,.5); }

.timeline { background:#fff;border:1px solid rgba(26,18,8,.07);border-radius:6px;padding:2rem;text-align:left;margin-bottom:2rem;animation:fadeUp .6s .75s both; }
.timeline-title { font-family:'Cormorant Garamond',serif;font-size:1.3rem;font-weight:400;margin-bottom:1.5rem; }
.tl-item { display:flex;gap:1rem;align-items:flex-start;opacity:.35;margin-bottom:1.25rem; }
.tl-item.active { opacity:1; }
.tl-item.active .tl-dot { background:var(--red);color:#fff;animation:pulse 2s infinite; }
@keyframes pulse { 0%,100%{box-shadow:0 0 0 0 rgba(192,57,43,.4)} 50%{box-shadow:0 0 0 6px rgba(192,57,43,0)} }
.tl-dot { width:40px;height:40px;border-radius:50%;background:rgba(26,18,8,.08);display:flex;align-items:center;justify-content:center;font-size:1.1rem;flex-shrink:0; }
.tl-name { font-weight:500;font-size:.9rem;margin-bottom:.15rem; }
.tl-time { font-size:.78rem;color:rgba(26,18,8,.4); }

.success-btns { display:flex;gap:.75rem;justify-content:center;flex-wrap:wrap;animation:fadeUp .6s .9s both; }
.success-btns .btn { min-width:180px;justify-content:center; }
</style>
{% endblock %}

{% block content %}
<div class="success-wrap">
    <div class="success-icon">‚úì</div>
    <h1 class="success-title">–î—è–∫—É—î–º–æ –∑–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è!</h1>
    <p class="success-sub">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è #{{ order.id }} —É—Å–ø—ñ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ —Ç–∞ –æ–ø–ª–∞—á–µ–Ω–æ. –ú–∏ –≤–∂–µ –±–µ—Ä–µ–º–æ—Å—å –∑–∞ —Ä–æ–±–æ—Ç—É.</p>

    <div class="order-detail-card">
        <div class="odc-title">–î–µ—Ç–∞–ª—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</div>
        <div class="odc-row"><span class="label">–ù–æ–º–µ—Ä</span><span>#{{ order.id }}</span></div>
        <div class="odc-row"><span class="label">–î–∞—Ç–∞</span><span>{{ order.created_at.strftime('%d.%m.%Y %H:%M') }}</span></div>
        <div class="odc-row"><span class="label">–¢–∏–ø</span><span>{{ {'delivery':'–î–æ—Å—Ç–∞–≤–∫–∞','takeaway':'–°–∞–º–æ–≤–∏–≤—ñ–∑','dine_in':'–í —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ'}[order.order_type.value] }}</span></div>
        {% if order.delivery_address %}<div class="odc-row"><span class="label">–ê–¥—Ä–µ—Å–∞</span><span>{{ order.delivery_address }}</span></div>{% endif %}
        {% if order.phone %}<div class="odc-row"><span class="label">–¢–µ–ª–µ—Ñ–æ–Ω</span><span>{{ order.phone }}</span></div>{% endif %}
        <div class="odc-row"><span class="label">–î–æ —Å–ø–ª–∞—Ç–∏</span><span>{{ order.total }} ‚Ç¥</span></div>
    </div>

    <div class="timeline">
        <div class="timeline-title">–°—Ç–∞—Ç—É—Å</div>
        <div class="tl-item active">
            <div class="tl-dot">‚úì</div>
            <div><div class="tl-name">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–π–Ω—è—Ç–æ</div><div class="tl-time">–ó–∞—Ä–∞–∑</div></div>
        </div>
        <div class="tl-item">
            <div class="tl-dot">üë®‚Äçüç≥</div>
            <div><div class="tl-name">–ì–æ—Ç—É—î—Ç—å—Å—è</div><div class="tl-time">~15‚Äì20 —Ö–≤</div></div>
        </div>
        <div class="tl-item">
            <div class="tl-dot">üì¶</div>
            <div><div class="tl-name">–ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–¥–∞—á—ñ</div><div class="tl-time">~30‚Äì40 —Ö–≤</div></div>
        </div>
        {% if order.order_type.value == 'delivery' %}
        <div class="tl-item">
            <div class="tl-dot">üöö</div>
            <div><div class="tl-name">–í –¥–æ—Ä–æ–∑—ñ</div><div class="tl-time">~45‚Äì60 —Ö–≤</div></div>
        </div>
        {% endif %}
    </div>

    <div class="success-btns">
        <a href="{{ url_for('main.profile') }}" class="btn btn--primary">–ú–æ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</a>
        <a href="{{ url_for('main.menu') }}" class="btn btn--ghost">–î–æ –º–µ–Ω—é</a>
    </div>
</div>
{% endblock %}
